<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    let WebApp = window.Telegram.WebApp;

    const MainButton = WebApp.MainButton;
    const BackButton = WebApp.BackButton;

    MainButton.show();
    BackButton.show();

    let xhrURL = new URL(`${window.location.origin}/api/test/test`);
    let requestOptions = {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'init-data': WebApp.initData // Передаем initData в заголовке запроса
      }
    };

    fetch(xhrURL, requestOptions)
      .then(response => response.json())
      .then(data => {
        if (data.result === true) {
          WebApp.showAlert(`Добро пожаловать, @${WebApp.WebAppUser.username}.`);
        } else {
          WebApp.showAlert("Ты что, хакер?");
        }
      })
      .catch(error => {
        console.error('Error:', error);
      });

  </script>
</body>
</html>